<div class="hero-slider swiper-container">
  <div class="swiper-wrapper">
    {% for block in section.blocks %}
      <div class="swiper-slide relative">
        {% assign video_url = block.settings.video_url %}
        {% if video_url contains '.mp4' %}
          <video autoplay muted loop playsinline class="w-full h-full object-cover" style="width:100%;object-fit:cover">
            <source src="{{ video_url }}" type="video/mp4">
          </video>
        {% elsif video_url contains 'youtube.com' or video_url contains 'vimeo.com' %}
          <iframe
            class="w-full h-full"
            src="{{ video_url | replace: 'watch?v=', 'embed/' }}"
            frameborder="0"
            allowfullscreen
          ></iframe>
        {% elsif block.settings.image %}
          <img
            src="{{ block.settings.image | img_url: '1600x' }}"
            alt="{{ block.settings.heading }}"
            class="w-full h-full object-cover"
            width="100%"
            height="500px"
          >
        {% endif %}

        <div class="absolute inset-0 bg-black bg-opacity-50 flex flex-col justify-center items-center text-center p-8 text-white">
          <h2 class="text-4xl font-bold">{{ block.settings.heading }}</h2>
          <p class="mt-2 text-lg">{{ block.settings.subheading }}</p>
          {% if block.settings.button_link %}
            <a href="{{ block.settings.button_link }}" class="mt-4 inline-block bg-white text-black px-6 py-2 rounded">
              {{ block.settings.button_label }}
            </a>
          {% endif %}
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Add pagination and navigation if desired -->
  <div class="swiper-pagination"></div>
  <div class="swiper-button-prev"></div>
  <div class="swiper-button-next"></div>
</div>

<script async src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">

<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Swiper('.hero-slider', {
      loop: true,
      autoplay: {
        delay: 5000,
      },
      pagination: {
        el: '.swiper-pagination',
        clickable: true,
      },
      navigation: {
        nextEl: '.swiper-button-next',
        prevEl: '.swiper-button-prev',
      },
    });
  });
</script>

{% schema %}
{
  "name": "Hero Slider",
  "settings": [],
  "blocks": [
    {
      "type": "slide",
      "name": "Slide",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image (fallback if no video)"
        },
        {
          "type": "url",
          "id": "video_url",
          "label": "Video URL (mp4, YouTube, or Vimeo)"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Your Slide Title"
        },
        {
          "type": "text",
          "id": "subheading",
          "label": "Subheading",
          "default": "Your slide description"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Shop Now"
        }
      ]
    }
  ],
  "max_blocks": 10,
  "presets": [
    {
      "name": "Hero Slider",
      "category": "Hero"
    }
  ]
}
{% endschema %}
